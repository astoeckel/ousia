<?xml version="1.0" standalone="yes"?>
<domain name="headings">

	<import rel="domain" src="./book_domain.oxm"/>

	<struct name="heading" cardinality="{0-1}" transparent="true">
		<!-- The parent mechanism is a curious thing. Remind yourself
		     that parent-child-relationship in this sense are mediated
		     by fields. So we must either reference a field that is
		     already there or declare a new one on the fly. -->
		<parent name="book.book">
			<field name="heading" isSubtree="true"/>
		</parent>
		<parent name="book.chapter">
			<field name="heading" isSubtree="true"/>
		</parent>
		<parent name="book.section">
			<field name="heading" isSubtree="true"/>
		</parent>
		<parent name="book.subsection">
			<field name="heading" isSubtree="true"/>
		</parent>
		<parent name="book.paragraph">
			<field name="heading" isSubtree="true"/>
		</parent>
		<!-- regarding its fields we have a problem here. We do not want to
		     declare a new field, because in fact we want to allow every
		     bit of content that a paragraph would allow - also considering
		     possible extensions of paragraph by other domains.
		     So we need to reference the default field of paragraph. -->
		<fieldRef name="book.paragraph."/>
	</struct>
</domain>
